# üöÄ Deployment Guide for Larry Navigator

This guide provides detailed instructions for deploying Larry Navigator to various hosting platforms.

## üìã Prerequisites

Before deploying, ensure you have:

1. **Google AI API Key** - Get one from [Google AI Studio](https://ai.google.dev/gemini-api/docs/api-key)
2. **larry_store_info.json** - Generated by running `build_larry_navigator.py`
3. **Git repository** - Your code pushed to GitHub/GitLab/Bitbucket

## üåü Recommended: Streamlit Cloud (Free & Easy)

Streamlit Cloud is the easiest way to deploy Larry with zero configuration.

### Steps:

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Add web interface for Larry"
   git push origin main
   ```

2. **Deploy on Streamlit Cloud**
   - Go to [share.streamlit.io](https://share.streamlit.io)
   - Sign in with GitHub
   - Click "New app"
   - Select your repository: `yourusername/larry-navigator`
   - Branch: `main` (or your branch)
   - Main file path: `app.py`
   - Click "Advanced settings" > "Secrets"

3. **Add Secrets**
   In the Secrets section, add:
   ```toml
   GOOGLE_AI_API_KEY = "your-actual-api-key-here"
   ```

4. **Deploy**
   - Click "Deploy"
   - Wait 2-3 minutes for the app to build
   - Your app will be live at `https://your-app-name.streamlit.app`

### Troubleshooting Streamlit Cloud:

- **Missing larry_store_info.json**: Make sure this file is committed to your repo
- **API Key issues**: Double-check the secret is named exactly `GOOGLE_AI_API_KEY`
- **Build errors**: Check the logs in the Streamlit Cloud dashboard

---

## üê≥ Docker Deployment

Perfect for self-hosting or deploying to container platforms.

### Local Docker

```bash
# Build the image
docker build -t larry-navigator .

# Run the container
docker run -p 8501:8501 \
  -e GOOGLE_AI_API_KEY="your-api-key" \
  -v $(pwd)/larry_store_info.json:/app/larry_store_info.json \
  larry-navigator
```

Access at `http://localhost:8501`

### Docker Compose

Create `docker-compose.yml`:
```yaml
version: '3.8'
services:
  larry:
    build: .
    ports:
      - "8501:8501"
    environment:
      - GOOGLE_AI_API_KEY=${GOOGLE_AI_API_KEY}
    volumes:
      - ./larry_store_info.json:/app/larry_store_info.json
    restart: unless-stopped
```

Then run:
```bash
# Create .env file
echo "GOOGLE_AI_API_KEY=your-api-key" > .env

# Start
docker-compose up -d
```

---

## ‚òÅÔ∏è Cloud Platform Deployments

### Google Cloud Run

```bash
# Install Google Cloud SDK first
# https://cloud.google.com/sdk/docs/install

# Set your project
gcloud config set project YOUR_PROJECT_ID

# Deploy
gcloud run deploy larry-navigator \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --port 8501 \
  --memory 512Mi \
  --set-env-vars GOOGLE_AI_API_KEY="your-api-key"
```

### Render

1. Go to [render.com](https://render.com)
2. Click "New +" > "Web Service"
3. Connect your GitHub repository
4. Configure:
   - **Name**: larry-navigator
   - **Environment**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `streamlit run app.py --server.port=$PORT --server.address=0.0.0.0`
5. Add Environment Variable:
   - Key: `GOOGLE_AI_API_KEY`
   - Value: your API key
6. Click "Create Web Service"

### Railway

1. Go to [railway.app](https://railway.app)
2. Click "New Project" > "Deploy from GitHub repo"
3. Select your repository
4. Railway will auto-detect Python
5. Add Environment Variable:
   - Variable: `GOOGLE_AI_API_KEY`
   - Value: your API key
6. Add Start Command in Settings:
   ```bash
   streamlit run app.py --server.port=$PORT --server.address=0.0.0.0
   ```
7. Deploy

### Heroku

```bash
# Install Heroku CLI
# https://devcenter.heroku.com/articles/heroku-cli

# Login
heroku login

# Create app
heroku create larry-navigator

# Set environment variable
heroku config:set GOOGLE_AI_API_KEY="your-api-key"

# Create Procfile
echo "web: streamlit run app.py --server.port=\$PORT --server.address=0.0.0.0" > Procfile

# Deploy
git add Procfile
git commit -m "Add Procfile for Heroku"
git push heroku main
```

---

## üîê Security Best Practices

1. **Never commit API keys** to your repository
   - Use environment variables or secrets management
   - Add `.streamlit/secrets.toml` to `.gitignore`

2. **Use HTTPS** in production
   - All major platforms (Streamlit Cloud, Render, Railway) provide HTTPS automatically

3. **Rate limiting**
   - Consider implementing rate limiting for public deployments
   - Monitor API usage in Google AI Studio

4. **Authentication** (Optional)
   - For private use, add authentication using Streamlit's `st.experimental_user` or third-party auth

---

## üìä Monitoring & Maintenance

### Check Application Health

```bash
# For Docker deployments
curl http://localhost:8501/_stcore/health

# For cloud deployments
curl https://your-app-url.com/_stcore/health
```

### View Logs

**Streamlit Cloud**: View logs in the app dashboard

**Docker**:
```bash
docker logs container-name
```

**Google Cloud Run**:
```bash
gcloud run logs read larry-navigator --region us-central1
```

### Update Deployment

1. Make changes to your code
2. Commit and push to GitHub
3. Most platforms auto-deploy on push
4. For Docker, rebuild: `docker build -t larry-navigator .`

---

## üí∞ Cost Estimates

- **Streamlit Cloud**: Free for public apps
- **Google Cloud Run**: ~$0-5/month (free tier: 2M requests/month)
- **Render**: $7/month (free tier available with limitations)
- **Railway**: ~$5/month (free trial $5 credit)
- **Heroku**: $7/month (no free tier as of 2022)

**Note**: API costs (Google AI) are separate and depend on usage.

---

## üÜò Common Issues

### "larry_store_info.json not found"
- Make sure you've run `build_larry_navigator.py` locally
- Commit the file to your repository
- For Docker, ensure it's copied in the Dockerfile

### "Invalid API Key"
- Check the environment variable is set correctly
- Verify the API key in Google AI Studio
- Ensure no extra spaces or quotes in the key

### App is slow
- Increase memory allocation (most platforms allow this)
- Consider using a faster Gemini model
- Enable caching in Streamlit with `@st.cache_data`

### Port binding errors
- Streamlit uses port 8501 by default
- Cloud platforms set `$PORT` environment variable
- Use `--server.port=$PORT` in start command

---

## üéØ Next Steps

After deployment:

1. **Test the deployment** thoroughly
2. **Set up monitoring** (uptime checks, error tracking)
3. **Share the URL** with users
4. **Gather feedback** and iterate
5. **Monitor API usage** to manage costs

---

## üìû Support

- **Streamlit Docs**: [docs.streamlit.io](https://docs.streamlit.io)
- **Google AI Docs**: [ai.google.dev](https://ai.google.dev)
- **Issues**: Open an issue on GitHub

Happy deploying! üöÄ
